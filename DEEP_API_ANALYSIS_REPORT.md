# üîç –ì–õ–£–ë–û–ö–ò–ô –ê–ù–ê–õ–ò–ó API: –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º —Å –Ω–æ–≤–æ—Å—Ç—è–º–∏

## üìä –ü—Ä–æ–±–ª–µ–º—ã –∏ –¥–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ 1: –û—à–∏–±–∫–∞ 403 –ø—Ä–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –Ω–æ–≤–æ—Å—Ç–µ–π
**–û–ø–∏—Å–∞–Ω–∏–µ**: `Request failed with status code 403` –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –æ–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –Ω–æ–≤–æ—Å—Ç—å

**–ì–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑**:
1. **Frontend –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `apiService.put()`** –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ—Å—Ç–µ–π
2. **API route –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–ª —Ç–æ–ª—å–∫–æ `PATCH`** –º–µ—Ç–æ–¥
3. **Backend –æ–∂–∏–¥–∞–µ—Ç `PATCH`** –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ—Å—Ç–µ–π
4. **–ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ HTTP –º–µ—Ç–æ–¥–æ–≤** –≤—ã–∑—ã–≤–∞–ª–æ 404 –æ—à–∏–±–∫—É

**–†–µ—à–µ–Ω–∏–µ**:
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `PUT` –º–µ—Ç–æ–¥ –≤ `/api/news/[id]/route.ts`
- ‚úÖ `PUT` –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –∫ backend –∫–∞–∫ `PATCH`
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω `PATCH` –º–µ—Ç–æ–¥ –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ 2: –û—à–∏–±–∫–∞ 404 –ø—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –Ω–æ–≤–æ—Å—Ç–µ–π
**–û–ø–∏—Å–∞–Ω–∏–µ**: `Request failed with status code 404` –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –Ω–æ–≤–æ—Å—Ç–∏

**–ì–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑**:
1. **Frontend –æ–±—Ä–∞—â–∞–ª—Å—è –∫ `/api/news/[id]`** –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
2. **API route –Ω–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª** –≤ Next.js
3. **–û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–∞ –ø—Ä–æ–∫—Å–∏-—Ñ—É–Ω–∫—Ü–∏—è** –º–µ–∂–¥—É frontend –∏ backend

**–†–µ—à–µ–Ω–∏–µ**:
- ‚úÖ –°–æ–∑–¥–∞–Ω API route `/api/news/[id]/route.ts`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã GET, PUT, PATCH, DELETE
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –∫ backend API

## üß™ –î–µ—Ç–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç 1: –ü—Ä—è–º–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API
```bash
# PUT –∑–∞–ø—Ä–æ—Å —á–µ—Ä–µ–∑ frontend API
curl -X PUT http://localhost:3002/api/news/{id} \
  -H "Authorization: Bearer TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"title":"Updated","status":"published"}'

# –†–µ–∑—É–ª—å—Ç–∞—Ç: ‚úÖ –£—Å–ø–µ—à–Ω–æ
```

### –¢–µ—Å—Ç 2: PATCH –∑–∞–ø—Ä–æ—Å –¥–ª—è —Å—Ç–∞—Ç—É—Å–∞
```bash
# PATCH –∑–∞–ø—Ä–æ—Å –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞
curl -X PATCH http://localhost:3002/api/news/{id}/status \
  -H "Authorization: Bearer TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"status":"draft"}'

# –†–µ–∑—É–ª—å—Ç–∞—Ç: ‚úÖ –£—Å–ø–µ—à–Ω–æ
```

### –¢–µ—Å—Ç 3: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```javascript
// –°–æ–∑–¥–∞–Ω test-frontend-auth.js
// –†–µ–∑—É–ª—å—Ç–∞—Ç: ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—à–ª–∏ —É—Å–ø–µ—à–Ω–æ
```

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ API
```
Frontend (Next.js)          Backend (NestJS)
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ /api/news/[id]  ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫ ‚îÇ /api/news/:id   ‚îÇ
‚îÇ - GET           ‚îÇ         ‚îÇ - GET           ‚îÇ
‚îÇ - PUT (‚ÜíPATCH)  ‚îÇ         ‚îÇ - PATCH         ‚îÇ
‚îÇ - PATCH         ‚îÇ         ‚îÇ - DELETE        ‚îÇ
‚îÇ - DELETE        ‚îÇ         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### HTTP –º–µ—Ç–æ–¥—ã
- **Frontend PUT** ‚Üí **Backend PATCH** (–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏)
- **Frontend PATCH** ‚Üí **Backend PATCH** (–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞)
- **Frontend GET** ‚Üí **Backend GET** (–ø–æ–ª—É—á–µ–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏)
- **Frontend DELETE** ‚Üí **Backend DELETE** (—É–¥–∞–ª–µ–Ω–∏–µ –Ω–æ–≤–æ—Å—Ç–∏)

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- **–¢–æ–∫–µ–Ω –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è** —á–µ—Ä–µ–∑ –∑–∞–≥–æ–ª–æ–≤–æ–∫ `Authorization: Bearer TOKEN`
- **apiService –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** –¥–æ–±–∞–≤–ª—è–µ—Ç —Ç–æ–∫–µ–Ω –∏–∑ localStorage
- **API routes –ø—Ä–æ–∫—Å–∏—Ä—É—é—Ç** —Ç–æ–∫–µ–Ω –∫ backend

## üìÅ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

1. **`/admin-panel/src/app/api/news/[id]/route.ts`**
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ GET, PUT, PATCH, DELETE –∑–∞–ø—Ä–æ—Å–æ–≤
   - –ü—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –∫ backend API
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

2. **`/admin-panel/src/app/api/news/route.ts`**
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ GET, POST –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è —Å–ø–∏—Å–∫–∞ –Ω–æ–≤–æ—Å—Ç–µ–π
   - –ü—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –∫ backend API

3. **`/test-frontend-auth.js`**
   - –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ CRUD –æ–ø–µ—Ä–∞—Ü–∏–π

## üîç –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –æ—à–∏–±–æ–∫ –≤ –±—Ä–∞—É–∑–µ—Ä–µ

### 1. –ü—Ä–æ–±–ª–µ–º—ã —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π
- **–¢–æ–∫–µ–Ω –∏—Å—Ç–µ–∫** - –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–ª–æ–≥–∏–Ω–∏—Ç—å—Å—è
- **–¢–æ–∫–µ–Ω –Ω–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω** –≤ localStorage
- **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç** —Ç–æ–∫–µ–Ω–∞

### 2. –ü—Ä–æ–±–ª–µ–º—ã —Å CORS
- **CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** –º–æ–≥—É—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã
- **–†–∞–∑–Ω—ã–µ –ø–æ—Ä—Ç—ã** frontend (3002) –∏ backend (3001)

### 3. –ü—Ä–æ–±–ª–µ–º—ã —Å —Å–µ—Ç–µ–≤—ã–º–∏ –∑–∞–ø—Ä–æ—Å–∞–º–∏
- **Backend –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –æ–Ω –∑–∞–ø—É—â–µ–Ω
- **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

**–í—Å–µ API –ø—Ä–æ–±–ª–µ–º—ã —Ä–µ—à–µ–Ω—ã:**
- ‚úÖ –û—à–∏–±–∫–∞ 403 - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ (–¥–æ–±–∞–≤–ª–µ–Ω PUT –º–µ—Ç–æ–¥)
- ‚úÖ –û—à–∏–±–∫–∞ 404 - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ (—Å–æ–∑–¥–∞–Ω—ã API routes)
- ‚úÖ –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –í—Å–µ HTTP –º–µ—Ç–æ–¥—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è
- ‚úÖ –ü—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ –∫ backend —Ä–∞–±–æ—Ç–∞–µ—Ç

**–ï—Å–ª–∏ –æ—à–∏–±–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ç–æ–∫–µ–Ω –Ω–µ –∏—Å—Ç–µ–∫
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ backend –∑–∞–ø—É—â–µ–Ω –Ω–∞ –ø–æ—Ä—Ç—É 3001
4. –û—á–∏—Å—Ç–∏—Ç–µ localStorage –∏ –ø–µ—Ä–µ–ª–æ–≥–∏–Ω—å—Ç–µ—Å—å

**–ú–æ–¥—É–ª—å –Ω–æ–≤–æ—Å—Ç–µ–π –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω!** üéâ

# Техническое задание на разработку админ панели для сайта СРО арбитражных управляющих

## Анализ существующего кода

### Бэкенд (NestJS + MongoDB)
**Статус**: ✅ Полностью реализован
- **Модули**: Auth, Users, News, Registry, Documents, Events, CompensationFund, Inspections, DisciplinaryMeasures, Pages, Settings, Files
- **API эндпоинты**: 5 уровней доступа (Public, Editor, Moderator, Admin, SuperAdmin)
- **Аутентификация**: JWT с refresh токенами, система ролей и разрешений
- **База данных**: MongoDB с полными схемами и индексами
- **Файловая система**: Загрузка, обработка изображений, безопасность

### Фронтенд (Next.js + React + TypeScript)
**Статус**: ✅ Публичная часть реализована
- **Страницы**: Главная, О нас, Компенсационный фонд, Реестр, Аккредитация, Трудовая деятельность, Новости, Мероприятия, Контроль, Контакты
- **Компоненты**: UI библиотека, секции, формы, таблицы, модальные окна
- **Навигация**: Адаптивное меню, хлебные крошки, SEO
- **Дизайн**: Бежевая цветовая схема, строгий деловой стиль

---

## ЭТАП 1: Базовая структура админ панели ✅ ЗАВЕРШЕН

### 1.1 Настройка роутинга и аутентификации
**Цель**: Создать защищенную область админки с отдельным роутингом

**Задачи**:
- [x] Создать отдельную папку `admin-panel` для админки (не трогая sro-frontend)
- [x] Настроить Next.js приложение с TypeScript и Tailwind CSS
- [x] Создать layout для админ панели с сайдбаром и хедером
- [x] Реализовать страницу входа в админку (`/login`)
- [x] Настроить редирект неавторизованных пользователей

**Результат**: ✅ Рабочая страница входа в админку по адресу `/login`

### 1.2 Базовые компоненты админки
**Цель**: Создать переиспользуемые компоненты для админ панели

**Задачи**:
- [x] Создать `AdminLayout` с сайдбаром и хедером
- [x] Реализовать `AdminSidebar` с навигационным меню
- [x] Создать `AdminHeader` с профилем пользователя и выходом
- [x] Добавить `AdminBreadcrumbs` для навигации
- [x] Создать базовые UI компоненты (Button, Input, Card)
- [x] Реализовать дашборд с статистикой

**Результат**: ✅ Базовая структура админ панели с навигацией

### 1.3 Система ролей и разрешений
**Цель**: Интегрировать систему ролей из бэкенда

**Задачи**:
- [x] Создать контекст для управления пользователем админки
- [x] Реализовать проверку ролей и разрешений
- [x] Создать HOC для защиты страниц по ролям
- [x] Добавить условное отображение элементов интерфейса

**Результат**: ✅ Работающая система ролей с ограничением доступа

### 1.4 Техническая реализация
**Выполнено**:
- [x] Создана отдельная папка `admin-panel` с Next.js 15 + TypeScript
- [x] Установлены необходимые зависимости (Headless UI, Heroicons, Axios, React Hook Form, Zod, Zustand, TanStack Table, Recharts)
- [x] Настроена структура папок согласно требованиям
- [x] Созданы типы TypeScript для всех сущностей
- [x] Реализован API сервис с автоматическим обновлением токенов
- [x] Создан контекст аутентификации с поддержкой ролей
- [x] Реализованы базовые UI компоненты
- [x] Создан адаптивный layout с сайдбаром и хедером
- [x] Реализована страница входа с валидацией
- [x] Создан дашборд с моковыми данными
- [x] Настроена цветовая схема в бежевых тонах
- [x] Добавлена поддержка русского языка

**Технический стек**:
- Frontend: Next.js 15, React 19, TypeScript
- UI: Tailwind CSS, Headless UI, Heroicons
- Состояние: React Context + Zustand
- HTTP: Axios с interceptors
- Формы: React Hook Form + Zod
- Таблицы: TanStack Table
- Графики: Recharts

---

## ЭТАП 2: Дашборд и общая статистика ✅ ЗАВЕРШЕН

### 2.1 Главная страница админки (Дашборд)
**Цель**: Создать информативную главную страницу с ключевыми метриками

**Задачи**:
- [x] Создать компонент `AdminDashboard` с переиспользуемыми компонентами
- [x] Реализовать карточки со статистикой:
  - Общее количество новостей
  - Количество арбитражных управляющих
  - Количество документов
  - Количество мероприятий
  - Количество проверок
  - Дисциплинарные меры
- [x] Добавить график активности за последние 30 дней с интерактивностью
- [x] Показать последние действия пользователей с детализацией
- [x] Добавить быстрые ссылки на основные разделы с группировкой

**Результат**: ✅ Информативный дашборд с ключевыми метриками

### 2.2 Навигационное меню
**Цель**: Создать удобную навигацию по разделам админки

**Задачи**:
- [x] Реализовать иерархическое меню с разделами:
  - Дашборд
  - Контент (Новости, Мероприятия, Документы, Страницы)
  - Реестр (Арбитражные управляющие)
  - Контроль (Проверки, Дисциплинарные меры)
  - Настройки (Сайт, Пользователи)
- [x] Добавить иконки для каждого раздела
- [x] Реализовать активные состояния
- [x] Добавить счетчики уведомлений с цветовой индикацией

    **Результат**: ✅ Полнофункциональное навигационное меню

    ### 2.3 Техническая реализация
    **Выполнено**:
    - [x] Создан компонент `StatCard` с поддержкой изменений и иконок
    - [x] Реализован `ActivityChart` с использованием Recharts
    - [x] Создан `ActivityFeed` для отображения последних действий
    - [x] Реализован `QuickActions` с группировкой по категориям
    - [x] Добавлен `NotificationDropdown` в хедер
    - [x] Создан сервис `dashboardService` для API интеграции
    - [x] Реализованы хуки `useDashboard` и `useActivityData`
    - [x] Добавлена поддержка моковых данных с fallback
    - [x] Настроена цветовая схема для различных типов уведомлений
    - [x] Реализована адаптивная верстка для всех компонентов
    - [x] Добавлен `ApiStatusIndicator` для отображения статуса API
    - [x] Улучшена обработка ошибок API с корректным логированием

**Новые компоненты**:
- `StatCard` - карточки статистики с индикаторами изменений
- `ActivityChart` - график активности с настраиваемыми данными
- `ActivityFeed` - лента последних действий пользователей
- `QuickActions` - быстрые действия с группировкой
- `NotificationDropdown` - выпадающее меню уведомлений

**API интеграция**:
- Полная интеграция с бэкенд API
- Автоматический fallback к моковым данным
- Обработка ошибок и состояний загрузки
- Кэширование данных для производительности

---

## ЭТАП 3: Управление контентом

### 3.1 Управление новостями
**Цель**: Создать полнофункциональный интерфейс для управления новостями

**Задачи**:
- [ ] Создать страницу списка новостей с фильтрацией и поиском
- [ ] Реализовать форму создания/редактирования новостей
- [ ] Добавить возможность загрузки изображений
- [ ] Реализовать предварительный просмотр новостей
- [ ] Добавить управление категориями новостей

**Результат**: Полнофункциональное управление новостями

### 3.2 Управление мероприятиями
**Цель**: Создать интерфейс для управления событиями и мероприятиями

**Задачи**:
- [ ] Создать страницу списка мероприятий
- [ ] Реализовать форму создания/редактирования мероприятий
- [ ] Добавить календарный вид мероприятий
- [ ] Реализовать управление участниками
- [ ] Добавить уведомления о мероприятиях

**Результат**: Полнофункциональное управление мероприятиями

### 3.3 Управление документами
**Цель**: Создать систему управления документами

**Задачи**:
- [ ] Создать страницу списка документов
- [ ] Реализовать загрузку и скачивание файлов
- [ ] Добавить категоризацию документов
- [ ] Реализовать поиск по документам
- [ ] Добавить версионность документов

**Результат**: Полнофункциональное управление документами

### 3.4 Управление страницами
**Цель**: Создать редактор страниц сайта

**Задачи**:
- [ ] Создать страницу списка страниц
- [ ] Реализовать WYSIWYG редактор
- [ ] Добавить управление SEO метаданными
- [ ] Реализовать предварительный просмотр
- [ ] Добавить управление структурой меню

**Результат**: Полнофункциональный редактор страниц

---

## ЭТАП 4: Управление реестром

### 3.1 Управление новостями
**Цель**: Полнофункциональный редактор новостей

**Задачи**:
- [ ] Создать страницу списка новостей с фильтрацией
- [ ] Реализовать форму создания/редактирования новости:
  - WYSIWYG редактор для контента
  - Выбор категории
  - Загрузка изображений
  - Настройка SEO метаданных
  - Выбор статуса публикации
- [ ] Добавить массовые операции (удаление, изменение статуса)
- [ ] Реализовать предварительный просмотр
- [ ] Добавить поиск и фильтрацию

**Результат**: Полнофункциональный редактор новостей

### 3.2 Управление категориями новостей
**Цель**: Управление категориями с возможностью сортировки

**Задачи**:
- [ ] Создать страницу управления категориями
- [ ] Реализовать CRUD операции для категорий
- [ ] Добавить drag-and-drop сортировку
- [ ] Реализовать изменение цвета и иконки категории
- [ ] Добавить статистику по категориям

**Результат**: Управление категориями новостей

### 3.3 Управление мероприятиями
**Цель**: Создание и управление мероприятиями

**Задачи**:
- [ ] Создать страницу списка мероприятий
- [ ] Реализовать форму создания мероприятия:
  - Основная информация (название, описание, даты)
  - Место проведения
  - Настройки регистрации
  - Программа мероприятия
  - Материалы и документы
- [ ] Добавить календарный вид мероприятий
- [ ] Реализовать управление участниками
- [ ] Добавить экспорт списка участников

**Результат**: Полнофункциональное управление мероприятиями

### 3.4 Управление документами
**Цель**: Система управления файлами и документами

**Задачи**:
- [ ] Создать страницу библиотеки документов
- [ ] Реализовать загрузку файлов с drag-and-drop
- [ ] Добавить категоризацию документов
- [ ] Реализовать поиск по документам
- [ ] Добавить предварительный просмотр файлов
- [ ] Реализовать управление версиями документов

**Результат**: Система управления документами

### 3.5 Управление контент-страницами
**Цель**: Редактирование статических страниц сайта

**Задачи**:
- [ ] Создать страницу списка контент-страниц
- [ ] Реализовать редактор страниц с WYSIWYG:
  - Редактирование заголовка и контента
  - Настройка SEO метаданных (title, description, keywords)
  - Выбор шаблона страницы
  - Настройка URL (slug)
  - Выбор статуса публикации
- [ ] Добавить предварительный просмотр страниц
- [ ] Реализовать управление меню сайта:
  - Добавление/удаление пунктов меню
  - Изменение порядка пунктов
  - Настройка вложенности меню
  - Управление видимостью пунктов
- [ ] Добавить управление футером сайта
- [ ] Реализовать настройку контактной информации

**Результат**: Полнофункциональный редактор контент-страниц

---

## ЭТАП 4: Управление реестром

### 4.1 Управление арбитражными управляющими
**Цель**: Полнофункциональное управление реестром

**Задачи**:
- [ ] Создать страницу списка управляющих с расширенной фильтрацией
- [ ] Реализовать форму добавления/редактирования:
  - Личные данные (ФИО, ИНН, дата рождения)
  - Контактная информация
  - Профессиональные данные
  - Документы и сертификаты
  - Статус в реестре
- [ ] Добавить массовый импорт из Excel/CSV
- [ ] Реализовать экспорт данных
- [ ] Добавить поиск по всем полям
- [ ] Реализовать историю изменений

**Результат**: Полнофункциональное управление реестром

### 4.2 Статистика по реестру
**Цель**: Аналитика и отчеты по реестру

**Задачи**:
- [ ] Создать страницу статистики реестра
- [ ] Реализовать графики и диаграммы:
  - Распределение по регионам
  - Статистика по статусам
  - Динамика пополнения реестра
- [ ] Добавить экспорт отчетов
- [ ] Реализовать фильтрацию по периодам

**Результат**: Аналитическая панель реестра

---

## ЭТАП 5: Система контроля и отчетности

### 5.1 Управление проверками
**Цель**: Система планирования и учета проверок

**Задачи**:
- [ ] Создать страницу управления проверками
- [ ] Реализовать календарь проверок
- [ ] Добавить форму создания проверки:
  - Выбор управляющего
  - Тип проверки (плановая/внеплановая)
  - Назначение инспектора
  - Планируемые даты
- [ ] Реализовать ведение результатов проверки
- [ ] Добавить систему уведомлений

**Результат**: Система управления проверками

### 5.2 Дисциплинарные меры
**Цель**: Учет и управление дисциплинарными мерами

**Задачи**:
- [ ] Создать страницу дисциплинарных мер
- [ ] Реализовать форму создания меры:
  - Выбор управляющего
  - Тип меры (предупреждение, выговор, исключение)
  - Основание для применения
  - Сроки и условия
- [ ] Добавить систему апелляций
- [ ] Реализовать уведомления о мерах

**Результат**: Система дисциплинарных мер

### 5.3 Отчеты и аналитика
**Цель**: Создание отчетов и аналитики

**Задачи**:
- [ ] Создать страницу отчетов
- [ ] Реализовать генератор отчетов:
  - Отчеты по проверкам
  - Отчеты по дисциплинарным мерам
  - Статистика по реестру
  - Финансовые отчеты
- [ ] Добавить настройку параметров отчетов
- [ ] Реализовать экспорт в различные форматы

**Результат**: Система отчетности

---

## ЭТАП 6: Управление настройками

### 6.1 Настройки сайта
**Цель**: Управление основными настройками сайта

**Задачи**:
- [ ] Создать страницу общих настроек
- [ ] Реализовать настройки:
  - Основная информация (название, описание)
  - Контактные данные
  - SEO настройки
  - Настройки темы (цвета, логотип)
- [ ] Добавить предварительный просмотр изменений
- [ ] Реализовать сброс к настройкам по умолчанию

**Результат**: Управление настройками сайта

### 6.2 Управление пользователями
**Цель**: Управление пользователями админки

**Задачи**:
- [ ] Создать страницу управления пользователями
- [ ] Реализовать CRUD операции для пользователей
- [ ] Добавить управление ролями и разрешениями
- [ ] Реализовать смену паролей
- [ ] Добавить логирование действий пользователей
- [ ] Реализовать деактивацию пользователей

**Результат**: Управление пользователями админки

### 6.3 Настройки безопасности
**Цель**: Настройки безопасности системы

**Задачи**:
- [ ] Создать страницу настроек безопасности
- [ ] Реализовать настройки:
  - Политика паролей
  - Настройки сессий
  - IP-ограничения
  - Логирование безопасности
- [ ] Добавить мониторинг подозрительной активности
- [ ] Реализовать уведомления о нарушениях

**Результат**: Настройки безопасности

---

## ЭТАП 7: Дополнительные функции

### 7.1 Система уведомлений
**Цель**: Внутренняя система уведомлений

**Задачи**:
- [ ] Создать компонент уведомлений
- [ ] Реализовать различные типы уведомлений:
  - Системные уведомления
  - Уведомления о задачах
  - Напоминания о проверках
- [ ] Добавить настройки уведомлений
- [ ] Реализовать историю уведомлений

**Результат**: Система внутренних уведомлений

### 7.2 Логирование и аудит
**Цель**: Отслеживание действий пользователей

**Задачи**:
- [ ] Создать страницу логов
- [ ] Реализовать фильтрацию логов:
  - По пользователям
  - По действиям
  - По датам
- [ ] Добавить экспорт логов
- [ ] Реализовать поиск по логам

**Результат**: Система логирования и аудита

### 7.3 Резервное копирование
**Цель**: Управление резервными копиями

**Задачи**:
- [ ] Создать страницу управления бэкапами
- [ ] Реализовать создание резервных копий
- [ ] Добавить планировщик автоматических бэкапов
- [ ] Реализовать восстановление из бэкапа
- [ ] Добавить мониторинг состояния бэкапов

**Результат**: Система резервного копирования

---

## ЭТАП 8: Оптимизация и тестирование

### 8.1 Оптимизация производительности
**Цель**: Оптимизация скорости работы админки

**Задачи**:
- [ ] Реализовать lazy loading для страниц
- [ ] Добавить кэширование данных
- [ ] Оптимизировать запросы к API
- [ ] Реализовать виртуализацию для больших списков
- [ ] Добавить индикаторы загрузки

**Результат**: Оптимизированная по скорости админка

### 8.2 Тестирование
**Цель**: Полное тестирование функциональности

**Задачи**:
- [ ] Написать unit тесты для компонентов
- [ ] Создать integration тесты для API
- [ ] Реализовать e2e тесты для основных сценариев
- [ ] Добавить тесты безопасности
- [ ] Провести нагрузочное тестирование

**Результат**: Полностью протестированная админка

### 8.3 Документация
**Цель**: Создание документации для пользователей

**Задачи**:
- [ ] Создать руководство пользователя
- [ ] Добавить встроенную справку
- [ ] Создать видео-инструкции
- [ ] Написать FAQ
- [ ] Добавить tooltips и подсказки

**Результат**: Полная документация для пользователей

---

## Технические требования

### Технологический стек
- **Frontend**: Next.js 14, React 18, TypeScript
- **UI библиотека**: Tailwind CSS, Headless UI
- **Состояние**: Zustand или React Context
- **HTTP клиент**: Axios с interceptors
- **Формы**: React Hook Form + Zod
- **Таблицы**: TanStack Table
- **Графики**: Chart.js или Recharts
- **WYSIWYG**: TinyMCE или Quill

### Структура файлов
```
sro-frontend/src/
├── app/
│   └── admin/
│       ├── layout.tsx
│       ├── page.tsx
│       ├── login/
│       ├── dashboard/
│       ├── news/
│       ├── events/
│       ├── documents/
│       ├── pages/
│       ├── registry/
│       ├── inspections/
│       ├── disciplinary-measures/
│       ├── settings/
│       └── users/
├── components/
│   └── admin/
│       ├── layout/
│       ├── ui/
│       ├── forms/
│       ├── tables/
│       └── charts/
├── hooks/
│   └── admin/
├── services/
│   └── admin/
└── types/
    └── admin/
```

### API интеграция
- Использовать существующие эндпоинты из Postman коллекций
- Реализовать централизованную обработку ошибок
- Добавить retry логику для failed запросов
- Реализовать offline режим для критичных операций

### Безопасность
- JWT токены с автоматическим обновлением
- CSRF защита
- XSS защита
- Валидация всех входных данных
- Логирование всех действий

### Производительность
- Code splitting по страницам
- Lazy loading компонентов
- Оптимизация изображений
- Кэширование API запросов
- Виртуализация больших списков

---

## Критерии готовности каждого этапа

1. **Функциональность**: Все заявленные функции работают корректно
2. **UI/UX**: Интерфейс интуитивно понятен и удобен
3. **Производительность**: Страницы загружаются менее чем за 2 секунды
4. **Безопасность**: Реализованы все меры безопасности
5. **Тестирование**: Код покрыт тестами минимум на 80%
6. **Документация**: Код задокументирован

## Примечания

- Каждый этап должен быть полностью завершен перед переходом к следующему
- После каждого этапа можно запускать и тестировать функциональность
- Все компоненты должны быть переиспользуемыми
- Код должен следовать принципам SOLID и DRY
- Использовать TypeScript для типизации всех компонентов
- Применять современные паттерны React (хуки, контекст, мемоизация)

---

## Временные рамки

- **ЭТАП 1-2**: 1-2 недели (Базовая структура + Дашборд)
- **ЭТАП 3**: 2-3 недели (Управление контентом)
- **ЭТАП 4**: 2-3 недели (Управление реестром)
- **ЭТАП 5**: 2-3 недели (Система контроля)
- **ЭТАП 6**: 1-2 недели (Настройки)
- **ЭТАП 7**: 1-2 недели (Дополнительные функции)
- **ЭТАП 8**: 1-2 недели (Оптимизация и тестирование)

**Общее время разработки**: 10-17 недель

---

*Документ создан на основе анализа существующего кода и технических заданий*
